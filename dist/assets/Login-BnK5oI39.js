import{S as e,_ as t,a as n,b as r,c as i,f as a,g as o,i as s,m as c,o as l,p as u,s as d,t as f,u as p,v as m,y as h}from"./index-m46nr8T0.js";var g={class:`auth-container`},_={class:`auth-card`},v={class:`form-group`},y={class:`form-group`},b={class:`form-options`},x={class:`remember-me`},S=[`disabled`],C={class:`auth-footer`},w=s({__name:`Login`,setup(s){let w=n(),T=r(!1),E=r({username:``,password:``,remember:!1}),D=async()=>{T.value=!0;try{let e=await f(`/users/login`,{username:E.value.username,password:E.value.password});console.log(`登录成功:`,e),e.token&&localStorage.setItem(`token`,e.token),localStorage.setItem(`user`,JSON.stringify({username:E.value.username,...e.user})),window.dispatchEvent(new CustomEvent(`userLoggedIn`)),w.push(`/`)}catch(e){console.error(`登录失败:`,e),alert(`登录失败: `+(e.response?.data?.message||`请检查用户名和密码`))}finally{T.value=!1}};return(n,r)=>{let s=t(`router-link`);return o(),a(`div`,g,[p(`div`,_,[r[9]||=p(`h2`,{class:`auth-title`},`欢迎回来`,-1),p(`form`,{onSubmit:i(D,[`prevent`]),class:`auth-form`},[p(`div`,v,[r[3]||=p(`label`,{for:`username`},`用户名`,-1),h(p(`input`,{id:`username`,type:`text`,"onUpdate:modelValue":r[0]||=e=>E.value.username=e,placeholder:`请输入用户名`,required:``},null,512),[[d,E.value.username]])]),p(`div`,y,[r[4]||=p(`label`,{for:`password`},`密码`,-1),h(p(`input`,{id:`password`,type:`password`,"onUpdate:modelValue":r[1]||=e=>E.value.password=e,placeholder:`请输入密码`,required:``},null,512),[[d,E.value.password]])]),p(`div`,b,[p(`label`,x,[h(p(`input`,{type:`checkbox`,"onUpdate:modelValue":r[2]||=e=>E.value.remember=e},null,512),[[l,E.value.remember]]),r[5]||=u(` 记住我 `,-1)]),r[6]||=p(`a`,{href:`#`,class:`forgot-password`},`忘记密码？`,-1)]),p(`button`,{type:`submit`,class:`auth-button`,disabled:T.value},e(T.value?`登录中...`:`登录`),9,S),p(`div`,C,[r[8]||=u(` 还没有账号？ `,-1),c(s,{to:`/register`,class:`switch-link`},{default:m(()=>[...r[7]||=[u(`立即注册`,-1)]]),_:1})])],32)])])}}},[[`__scopeId`,`data-v-b0bbdcbb`]]);export{w as default};